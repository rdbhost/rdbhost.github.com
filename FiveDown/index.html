<html>
<head>
    <link rel="stylesheet" href="src/normalize.css">
    <link rel="stylesheet" href="src/styles.css">
    <link rel="stylesheet" href="src/overlay-styles.css">

    <script type="module" src="js/pubsub.js"></script>
    <script type="module" src="js/row_collection.js"></script>
    <script type="module" src="js/drag_drop.js"></script>
    <script type="module" src="js/sheet_interface.js"></script>
    <script type="module" src="js/project_menu.js"></script>
    <script type="module" src="js/evaluator.js"></script>
    <script type="module" src="js/plot.js"></script>
    <script type="module" src="js/import_export.js"></script>

    <script src="js/lib/chart.umd.min.js"></script>
</head>
<body>
    <div class="outer-box">
        <div class="topbox">
            <div class="project-menu">
                <span id="sheet00" class="sheet-selecter active">
                    <span>Sheet 00</span></span>
                <span id="new-sheet">[new sheet]</span>
            </div>
            <button id="plot-btn" class="plot-btn-top" disabled>Plot</button>
            <button id="import-btn" class="import-btn-top">Import</button>
            <button id="delete-sheet">Delete Sheet</button>
        </div>
        <table id="main-sheet">
            <thead>
                <tr>
                    <th class="handle"></th>
                    <th class="description">Description</th>
                    <th class="name">Name</th>
                    <th class="formula">Formula</th>
                    <th class="result" draggable="true">
                        <span>Result</span><button class="close-res"></button>
                    </th>
                    <th class="add-result"><button></button></th>
                    <th class="unit" contenteditable="true">Unit</th>
                    <th class="delete"></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="handle" draggable="true"></td>
                    <td class="description" contenteditable="true"></td>
                    <td class="name" contenteditable="true"></td>
                    <td class="formula" tabindex="0"></td>
                    <td class="result" tabindex="0"></td>
                    <td class="add-result"><input type="checkbox" class="plot-checkbox" style="display:none;"></td>
                    <td class="unit" contenteditable="true"></td>
                    <td class="delete"></td>
                </tr>    
                <tr>
                    <td class="handle" draggable="true"></td>
                    <td class="description" contenteditable="true">height</td>
                    <td class="name" contenteditable="true">h</td>
                    <td class="formula" tabindex="-1"></td>
                    <td class="result" tabindex="0" contenteditable="true">3.0</td>
                    <td class="add-result"><input type="checkbox" class="plot-checkbox" style="display:none;"></td>
                    <td class="unit" contenteditable="true">cm</td>
                    <td class="delete"></td>
                </tr>    
                <tr>
                    <td class="handle" draggable="true"></td>
                    <td class="description" contenteditable="true">radius</td>
                    <td class="name" contenteditable="true">rad</td>
                    <td class="formula" tabindex="-1"></td>
                    <td class="result" tabindex="0" contenteditable="true">2.5</td>
                    <td class="add-result"><input type="checkbox" class="plot-checkbox" style="display:none;"></td>
                    <td class="unit" contenteditable="true">cm</td>
                    <td class="delete"></td>
                </tr>    
                <tr>
                    <td class="handle" draggable="true"></td>
                    <td class="description" contenteditable="true">volume of cylinder</td>
                    <td class="name" contenteditable="true">vol</td>
                    <td class="formula" tabindex="0" contenteditable="true">h*3.14*rad*rad</td>
                    <td class="result" tabindex="-1"></td>
                    <td class="add-result"><input type="checkbox" class="plot-checkbox" style="display:none;"></td>
                    <td class="unit" contenteditable="true">cm</td>
                    <td class="delete"></td>
                </tr>    
                <tr>
                    <td class="handle" draggable="true"></td>
                    <td class="description" contenteditable="true"></td>
                    <td class="name" contenteditable="true"></td>
                    <td class="formula" tabindex="0"></td>
                    <td class="result" tabindex="0"></td>
                    <td class="add-result"><input type="checkbox" class="plot-checkbox" style="display:none;"></td>
                    <td class="unit" contenteditable="true"></td>
                    <td class="delete"></td>
                </tr>    
                <tr>
                    <td class="handle" draggable="true"></td>
                    <td class="description" contenteditable="true">x unit</td>
                    <td class="name" contenteditable="true">x</td>
                    <td class="formula" tabindex="-1"></td>
                    <td class="result" tabindex="0" contenteditable="true">[1,0,0]</td>
                    <td class="add-result"><input type="checkbox" class="plot-checkbox" style="display:none;"></td>
                    <td class="unit" contenteditable="true">cm</td>
                    <td class="delete"></td>
                </tr>    
                <tr>
                    <td class="handle" draggable="true"></td>
                    <td class="description" contenteditable="true">y unit</td>
                    <td class="name" contenteditable="true">y</td>
                    <td class="formula" tabindex="-1"></td>
                    <td class="result" tabindex="0" contenteditable="true">[0,1,0]</td>
                    <td class="add-result"><input type="checkbox" class="plot-checkbox" style="display:none;"></td>
                    <td class="unit" contenteditable="true">cm</td>
                    <td class="delete"></td>
                </tr>    
            </tbody>
        </table>
    </div>
    <div id="plot-overlay" class="plot-overlay">
        <button id="plot-overlay-close" class="plot-overlay-close" title="Close">&#10005;</button>
        <div class="plot-overlay-buttons">
            <button class="plot-btn" id="bar-chart-btn" title="Bar Chart">
                <img src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/icons/bar-chart.svg" alt="Bar Chart" />
            </button>
            <button class="plot-btn" id="line-chart-btn" title="Line Chart">
                <img src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/icons/graph-up.svg" alt="Line Chart" />
            </button>
            <button class="plot-btn" id="scatter-chart-btn" title="Scatter Chart">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="32" height="32" aria-label="Scatter Chart">
                    <circle cx="7" cy="14" r="3"/>
                    <circle cx="11" cy="6" r="2"/>
                    <circle cx="16.6" cy="17.6" r="2.4"/>
                </svg>
            </button>
        </div>
        <div class="plot-svg-container"></div>
    </div>
    <div id="import-overlay" class="import-overlay">
        <button id="import-overlay-close" class="import-overlay-close" title="Close">&#10005;</button>
        <div class="import-overlay-content">
            <p><h2>Import / Export</h2>
               <input type="file" id="import-file" accept=".json">
               <button id="import-submit">Import and Save</button>
            <div id="import-message"></div></p>
            
            <p><button id="export-data-url">Generate Data URL</button>
               <button id="download-json">Download JSON</button>
               <div id="data-url-display" class="data-url-display"></div></p>
        </div>
    </div>
</body>    
</html>